<!DOCTYPE html>
<html lang="en">
<head>
    <!-- CHARACTER SEST AND VIEWPOINT -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Friendly and professional dental care for the whole family in Wasilla, Alaska. Offering gentle, compassionate, restorative, and advanced dentistry with personalized care for patients of all ages. With comprehensive dental services: cleanings, fillings, implants, cosmetic dentistry and emergency care for everyone.">
    <meta name="author" content="Chelsea Saunders"> <!-- OPEN GRAPH: social sharing -->
    <meta property="og:title" content="Page Title">
    <meta property="og:description" content="Your trusted family dentist in Wasilla, Alaska. Comprehensive dental care for children and adults, including cleanings, fillings, crowns, and more.">
    <meta property="og:image" content="">
    <meta property="og:url" content="https://www.northwinddentalak.com">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow"> <!-- This will help search engins know if they should index your page -->
    <title>Northwind Dental, Wasilla, Alaska</title>
    <link rel="stylesheet" href="./src/css/index.css">
    <link rel="stylesheet" href="./src/css/components.css">
    <script>
    // Handle Supabase redirect links (signup & recovery)
    window.addEventListener("load", () => {
        const hash = window.location.hash;
        const params = new URLSearchParams(hash.replace("#", ""));
        const type = params.get("type");

        console.log("Full hash:", hash);
        console.log("Redirect type:", type);

        // Password reset redirect
        if (type === "recovery") {
        console.log("Password recovery redirect detected → update-password.html");
        window.location.replace("./update-password.html" + hash);
        return;
        }

        // Signup confirmation redirect (loop fix)
        if (type === "signup") {
        console.log("Signup confirmation detected — clearing hash to stop loop.");
        // Replace the URL to remove the #token and prevent Supabase loop
        history.replaceState(null, "", window.location.pathname);
        return;
        }

        // Default: no redirect needed
        console.log("No redirect needed.");
    });
    </script>
    <script type="module" src="./src/js/header.mjs" defer></script>
    <script type="module" src="./src/js/index.mjs?v=2" defer></script>
    <script type="module" src="./src/js/auth.mjs" defer></script>
</head>
<body>
    <header>
        <div class="global-header">
            <a href="index.html" class="logo-link">
                <img src="./src/images/logos/logo.jpg" alt="Northwind Dental Logo" class="logo">
            </a>
            <button
                id="toggle-menu"
                class="global-nav__toggle"
                type="button"
                aria-controls="global-nav"
                aria-expanded="false"
                aria-label="Open menu"
                data-menu-open="false"
            >
                <span class="global-nav__toggle-menu-open">
                    <span class="hamburger" aria-hidden="true">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                    <span class="visually-hidden">Open</span>
                </span>
                <span class="global-nav__toggle-menu-closed">
                    <span class="x-icon" aria-hidden="true">
                        <span></span>
                        <span></span>
                    </span> 
                    <span class="visually-hidden">Close</span>
                </span>
            </button>
            <nav id="global-nav" class="global-nav" aria-label="main-navigation">
                <ul>
                    <li><a href="index.html" class="login-link">LOGIN</a> </li>
                    <li><a href="logout.html" class="logout-link">SIGN OUT</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div id="status-message" class="status-message hidden"></div>
        <!-- LOGIN PAGE -->
         <form id="login-form" method="POST">
            <h2 class="header">Login</h2>
            <label for="login-email">Email:
                <input type="email" id="login-email" name="email" placeholder="email@email.com" autocomplete="email" required>
            </label>

            <label for="login-password">Password:</label>
            <div class="password-container">
                <input 
                    type="password" 
                    id="login-password" 
                    name="password" 
                    minlength="8" 
                    autocomplete="current-password" 
                    placeholder="required length: 8 characters"
                    required
                >
                <button
                    type="button"
                    class="show-password"
                    aria-label="Show password"
                >
                <!-- eye open -->
                <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" aria-hidden="true">
                    <path d="M572.52 241.4C518.79 135.45 407.81 64 288 64S57.21 135.45 3.48 241.4a48.11 48.11 0 0 0 0 29.2C57.21 376.55 168.19 448 288 448s230.79-71.45 284.52-177.4a48.11 48.11 0 0 0 0-29.2ZM288 400c-79.4 0-144-64.6-144-144S208.6 112 288 112s144 64.6 144 144-64.6 144-144 144Zm0-240a96 96 0 1 0 96 96 96.11 96.11 0 0 0-96-96Z"/>
                </svg>
                <!-- eye slashed (hidden) -->
                 <svg class="icon-eye-hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" aria-hidden="true">
                    <path d="M634 471L34 3a16 16 0 0 0-22 22l85 66C36 144 6 204 1 240a48 48 0 0 0 0 32c54 106 165 177 287 177a333 333 0 0 0 130-26l95 74a16 16 0 0 0 22-22Zm-346-62a96 96 0 0 1-93-118l121 93a96 96 0 0 1-28 25Zm46-159 54 41a96 96 0 0 0-54-41Z"/>
                </svg>
                </button>
            </div>

            <button type="submit" class="submit">Login</button>

            <!-- LINK: CREATE ACCOUNT -->
            <p class="c-acct">Click <a href="#" id="show-create-account">here</a>  to create an account</p>
            <!-- FORGOT PASSWORD -->
            <p class="c-acct" id="f-password">Forgot your <a href="#" id="forgot-password">password?</a></p>

            <!-- MESSAGE AREA FOR ERRORS UNDER THE FORM -->
             <div id="login-message" aria-live="polite"></div>
         </form>
         <!-- FORGOT PASSWORD -> RESET PASSWORD -->
        <form id="reset-form" style="display: none;">
            <h2 id="rs-pwd">Reset Password</h2>
            <p id="rs-pwd-p">Enter your email to reset your password</p>

            <label for="reset-email">Email:</label>
            <input type="email" id="reset-email" name="email" placeholder="email@email.com" required autocomplete="email">

            <button type="submit" class="submit">Send Reset Link</button>
            <p class="c-acct">Remember it? <a href="#" id="back-to-login">Login</a></p>
        </form>

         <!-- CREATE ACCOUNT -->
         <form id="create-acct-form">

            <p class="c-acct">Already have an account? <a href="#" id="show-login">Login</a></p>

            <label for="name">Name:</label>
            <input type="text" id="name" name="name" placeholder="Your Name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="email@email.com" required autocomplete="email">

            <label for="password">Password:</label>
            <div class="password-container">
                <input 
                    type="password" 
                    name="password" 
                    id="password" 
                    required 
                    minlength="8" 
                    autocomplete="new-password"
                    placeholder="required length: 8 characters"
                >
                <button type="button" class="show-password" aria-label="Show password">
                <!-- eye open -->
                <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" aria-hidden="true">
                    <path d="M572.52 241.4C518.79 135.45 407.81 64 288 64S57.21 135.45 3.48 241.4a48.11 48.11 0 0 0 0 29.2C57.21 376.55 168.19 448 288 448s230.79-71.45 284.52-177.4a48.11 48.11 0 0 0 0-29.2ZM288 400c-79.4 0-144-64.6-144-144S208.6 112 288 112s144 64.6 144 144-64.6 144-144 144Zm0-240a96 96 0 1 0 96 96 96.11 96.11 0 0 0-96-96Z"/>
                </svg>
                <!-- eye slashed (hidden) -->
                 <svg class="icon-eye-hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" aria-hidden="true">
                    <path d="M634 471L34 3a16 16 0 0 0-22 22l85 66C36 144 6 204 1 240a48 48 0 0 0 0 32c54 106 165 177 287 177a333 333 0 0 0 130-26l95 74a16 16 0 0 0 22-22Zm-346-62a96 96 0 0 1-93-118l121 93a96 96 0 0 1-28 25Zm46-159 54 41a96 96 0 0 0-54-41Z"/>
                </svg>
                </button>
            </div>
            

            <label for="confirm-password">Re-Enter Password:</label>
            <div class="password-container">
                <input 
                    type="password" 
                    name="confirm-password" 
                    id="confirm-password" 
                    minlength="8" 
                    autocomplete="new-password"
                    placeholder="required length: 8 characters"
                    required 
                >
                <button type="button" class="show-password" aria-label="Show password">
                <!-- eye open -->
                <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" aria-hidden="true">
                    <path d="M572.52 241.4C518.79 135.45 407.81 64 288 64S57.21 135.45 3.48 241.4a48.11 48.11 0 0 0 0 29.2C57.21 376.55 168.19 448 288 448s230.79-71.45 284.52-177.4a48.11 48.11 0 0 0 0-29.2ZM288 400c-79.4 0-144-64.6-144-144S208.6 112 288 112s144 64.6 144 144-64.6 144-144 144Zm0-240a96 96 0 1 0 96 96 96.11 96.11 0 0 0-96-96Z"/>
                </svg>
                <!-- eye slashed (hidden) -->
                 <svg class="icon-eye-hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" aria-hidden="true">
                    <path d="M634 471L34 3a16 16 0 0 0-22 22l85 66C36 144 6 204 1 240a48 48 0 0 0 0 32c54 106 165 177 287 177a333 333 0 0 0 130-26l95 74a16 16 0 0 0 22-22Zm-346-62a96 96 0 0 1-93-118l121 93a96 96 0 0 1-28 25Zm46-159 54 41a96 96 0 0 0-54-41Z"/>
                </svg>
                </button>
            </div>
            

            <button type="submit" class="submit">Create Account</button>

            <p id="resend-wrapper" class="hidden">
                Didn't get the email?
                <button id="resend-confirmation-email" type="button" class="link-button">
                    Resend confirmation email.
                </button>
            </p>
         </form>
    </main>
    <footer>
        <div class="main-footer">
            <div class="footer-left">
                <h4 id="footer-name">NORTHWIND DENTAL</h4>
                <p class="footer-address">3719 E. Meridian Loop<br>STE. B<br>Wasilla, AK 99654</p>
                <p id="footer-phone">Phone: (907) 373-2440<br>Fax: 907-373-1920</p>
            </div>
            <div class="footer-middle">
                <h4 id="footer-office-hours">OFFICE HOURS</h4>
                <p class="footer-hours">
                    Monday: 9AM-5PM<br>
                    Tuesday: 9AM-5PM<br>
                    Wednesday: 9AM-5PM<br>
                    Thursday: 9AM-5PM<br>
                    Friday: CLOSED<br>
                    Saturday: CLOSED<br>
                </p>
            </div>
        <div class="copyright">
            <p id="copyright">&copy; 2025 Northwind Dental. All Rights Reserved.</p>
        </div>
    </footer>
</body>
</html>